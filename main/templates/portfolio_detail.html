{% extends "base.html" %}
{% load bootstrapify %}
{% load static %}

{% block title %}{{ item.title }} – Portfolio{% endblock %}
{% block body_class %}portfolio-detail-page{% endblock %}

{% block content %}
<section id="portfolio-detail" class="section py-5">
  <div class="container" data-aos="fade-up">

    {# ---------- HERO IMAGE ---------- #}
    {% if hero_url %}
    <figure class="mb-5">
      <img src="{{ hero_url }}" alt="{{ item.title }}" class="img-fluid w-100 rounded-4 shadow">
    </figure>
    {% endif %}

    {# ---------- HEADER + META ---------- #}
    <header class="mb-4 text-center">
      <h1 class="display-5 fw-bold mb-2">{{ item.title }}</h1>
      {% if item.subtitle %}
        <p class="lead mb-3">{{ item.subtitle }}</p>
      {% endif %}

      <div class="mb-3">
        {% for c in item.categories.all %}
          <span class="badge bg-secondary me-1">{{ c.name }}</span>
        {% empty %}
        {% endfor %}
      </div>

      {% if item.external_url %}
        <a href="{{ item.external_url }}" target="_blank" rel="noopener" class="btn btn-primary mt-2">
          Visit project <i class="bi bi-box-arrow-up-right ms-1"></i>
        </a>
      {% endif %}
    </header>

    {# ---------- MAIN CONTENT ---------- #}
    <div class="row justify-content-center">
      <div class="col-lg-10 col-xl-8">
        <article class="prose mx-auto">
          {{ body_html| bootstrapify | safe }}
        </article>
      </div>
    </div>

    {# ---------- NAVIGATION ---------- #}
    <div class="d-flex justify-content-between mt-5">
      {% if prev_item %}
        <a href="{% url 'portfolio_detail' prev_item.slug %}" class="btn btn-outline-light">
          ← {{ prev_item.title }}
        </a>
      {% else %}
        <span></span>
      {% endif %}
      {% if next_item %}
        <a href="{% url 'portfolio_detail' next_item.slug %}" class="btn btn-outline-light">
          {{ next_item.title }} →
        </a>
      {% endif %}
    </div>

  </div>
</section>
{% endblock %}
