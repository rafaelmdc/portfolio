{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block title %}{{ page.title }}{% endblock %}

{% block content %}
<style>
  .blog-article{ max-width: 920px; }
  .blog-title{ letter-spacing:-.02em; line-height:1.15; }
  .blog-content{ font-size:1.06rem; line-height:1.85; }

  .blog-content h2{ margin-top:2rem; margin-bottom:.75rem; line-height:1.25; }
  .blog-content h3{ margin-top:1.6rem; margin-bottom:.6rem; line-height:1.25; }
  .blog-content p{ margin-bottom:1.1rem; }

  .blog-content a{ text-decoration:underline; text-underline-offset:3px; }

  .blog-content ul,.blog-content ol{ padding-left:1.25rem; margin-bottom:1.1rem; }

  .blog-content blockquote{
    margin:1.5rem 0; padding:1rem 1.25rem;
    border-left:4px solid rgba(255,255,255,.18);
    background:rgba(255,255,255,.04);
    border-radius:12px;
  }

  .blog-content pre{
    padding:1rem 1.15rem; border-radius:14px;
    background:rgba(0,0,0,.35);
    border:1px solid rgba(255,255,255,.10);
    overflow-x:auto; margin:1.25rem 0;
  }
  .blog-content code{
    padding:.15rem .35rem; border-radius:8px;
    background:rgba(0,0,0,.25);
    border:1px solid rgba(255,255,255,.08);
  }

  .blog-divider{ opacity:.18; }

  /* StreamField image presentation helpers */
  .sf-figure{ margin: 1.25rem 0; }
  .sf-figure figcaption{ margin-top:.6rem; font-size:.95rem; opacity:.7; }
  .sf-wide{ width: 100%; }
  @media (min-width: 992px){
    .sf-wide{ width: 110%; margin-left: -5%; }
    .sf-full{ width: 100vw; margin-left: calc(50% - 50vw); }
  }
  .sf-float-left{ float:left; width: 42%; margin: .4rem 1.25rem .8rem 0; }
  .sf-float-right{ float:right; width: 42%; margin: .4rem 0 .8rem 1.25rem; }
  @media (max-width: 768px){
    .sf-float-left, .sf-float-right{ float:none; width:100%; margin: 1rem 0; }
  }

  /* Callout block */
  .sf-callout{
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.04);
    border-radius:16px;
    padding: 1rem 1.1rem;
    margin: 1.25rem 0;
  }
  .sf-callout .sf-callout-title{ font-weight:600; margin-bottom:.35rem; }
  .sf-callout.sf-info{ border-left: 4px solid rgba(13,110,253,.6); }
  .sf-callout.sf-tip{ border-left: 4px solid rgba(25,135,84,.6); }
  .sf-callout.sf-warn{ border-left: 4px solid rgba(255,193,7,.6); }
  .sf-callout.sf-note{ border-left: 4px solid rgba(173,181,189,.6); }
</style>

<div class="container py-5 blog-article">

  <div class="mb-4">
    <p class="text-muted mb-2">
      {{ page.date|date:"M j, Y" }}
      {% if page.reading_time_minutes %}
        • {{ page.reading_time_minutes }} min read
      {% endif %}
      {% if page.featured %}
        • <span class="badge bg-warning text-dark align-middle">Featured</span>
      {% endif %}
    </p>

    <h1 class="blog-title mb-3">{{ page.title }}</h1>

    {% if page.tags.all %}
      <div class="d-flex flex-wrap gap-2 mb-3">
        {% for tag in page.tags.all %}
          <a href="{{ page.get_parent.url }}tag/{{ tag.slug }}/"
             class="badge text-bg-dark border text-decoration-none">
            {{ tag }}
          </a>
        {% endfor %}
      </div>
    {% endif %}

    {% if page.intro %}
      <p class="lead text-muted mb-0" style="line-height:1.75;">{{ page.intro }}</p>
    {% endif %}
  </div>

  {% if page.hero_image %}
    <figure class="mb-4 p-2 p-md-3 rounded-4 border" style="background: rgba(255,255,255,0.03);">
      {% image page.hero_image width-1400 class="img-fluid rounded-4" %}
      {% if page.hero_caption %}
        <figcaption class="mt-2 text-muted" style="opacity:.75;">
          {{ page.hero_caption }}
        </figcaption>
      {% endif %}
    </figure>
  {% endif %}

  <article class="blog-content">
    {% for block in page.body %}
      {% include_block block %}
    {% endfor %}
  </article>

  <hr class="my-5 blog-divider">

  <a href="{{ page.get_parent.url }}" class="text-decoration-none">← Back to Blog</a>

</div>
{% endblock %}
