{% load wagtailimages_tags %}

{% if value and value.image %}
  {% image value.image width-1800 as r %}

  <figure class="sf-figure
    sf-style-{{ value.style|default:'plain' }}
    sf-radius-{{ value.radius|default:'md' }}
    sf-shadow-{{ value.shadow|default:'none' }}
    {% if value.alignment == 'wide' %}sf-wide{% endif %}
    {% if value.alignment == 'full' %}sf-full{% endif %}
    {% if value.alignment == 'left' %}sf-float-left{% endif %}
    {% if value.alignment == 'right' %}sf-float-right{% endif %}
    sf-mw-{{ value.max_width|default:'lg' }}
  ">

    {% if value.link_url %}
      <a href="{{ value.link_url }}"
         class="sf-img-link"
         {% if value.open_in_new %}target="_blank" rel="noopener"{% endif %}>
    {% endif %}

      <img
        src="{{ r.url }}"
        width="{{ r.width }}"
        height="{{ r.height }}"
        class="img-fluid"
        alt=""
        loading="lazy"
      >

    {% if value.link_url %}
      </a>
    {% endif %}

  </figure>
{% endif %}
